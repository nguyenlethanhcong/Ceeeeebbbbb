const count=document.getElementById("count"),head=document.getElementById("head"),giftbox=document.getElementById("merrywrap"),canvasC=document.getElementById("c");function hideEverything(){head.style.display="none",count.style.display="none",giftbox.style.display="none",canvasC.style.display="none"}hideEverything();var confettiSettings={target:"confetti"},confetti=new window.ConfettiGenerator(confettiSettings);confetti.render();const second=1e3,minute=6e4,hour=36e5,day=864e5;let countDown=new Date("October 13, 2019 20:00:00").getTime();x=setInterval(function(){let i=(new Date).getTime(),e=countDown-i;document.getElementById("day").innerText=Math.floor(e/day),document.getElementById("hour").innerText=Math.floor(e%day/36e5),document.getElementById("minute").innerText=Math.floor(e%36e5/6e4),document.getElementById("second").innerText=Math.floor(e%6e4/1e3);var t=c.width=window.innerWidth,s=c.height=window.innerHeight,h=c.getContext("2d"),a=t/2,r=s/2,l={strings:["CEEEEEEEEEEEEEBBBBBBBBBB","CEEEEEEEEEEEEEEEEEBBBBBBBBBBBBBBBB","CEEEEEEEEEEEEBBBBBBBBBBBB"],charSize:30,charSpacing:35,lineHeight:40,cx:t/2,cy:s/2,fireworkPrevPoints:10,fireworkBaseLineWidth:5,fireworkAddedLineWidth:8,fireworkSpawnTime:200,fireworkBaseReachTime:30,fireworkAddedReachTime:30,fireworkCircleBaseSize:20,fireworkCircleAddedSize:10,fireworkCircleBaseTime:30,fireworkCircleAddedTime:30,fireworkCircleFadeBaseTime:10,fireworkCircleFadeAddedTime:5,fireworkBaseShards:5,fireworkAddedShards:5,fireworkShardPrevPoints:3,fireworkShardBaseVel:4,fireworkShardAddedVel:2,fireworkShardBaseSize:3,fireworkShardAddedSize:3,gravity:.1,upFlow:-.1,letterContemplatingWaitTime:360,balloonSpawnTime:20,balloonBaseInflateTime:10,balloonAddedInflateTime:10,balloonBaseSize:20,balloonAddedSize:20,balloonBaseVel:.4,balloonAddedVel:.4,balloonBaseRadian:-(Math.PI/2-.5),balloonAddedRadian:-1},n={totalWidth:l.charSpacing*Math.max(l.strings[0].length,l.strings[1].length)},o=2*Math.PI,d=o/4,f=[];function p(i,e,t){this.char=i,this.x=e,this.y=t,this.dx=-h.measureText(i).width/2,this.dy=+l.charSize/2,this.fireworkDy=this.y-r;var s=e/n.totalWidth*360;this.color="hsl(hue,80%,50%)".replace("hue",s),this.lightAlphaColor="hsla(hue,80%,light%,alp)".replace("hue",s),this.lightColor="hsl(hue,80%,light%)".replace("hue",s),this.alphaColor="hsla(hue,80%,50%,alp)".replace("hue",s),this.reset()}function g(i,e,t,s,h){var a=l.fireworkShardBaseVel+l.fireworkShardAddedVel*Math.random();this.vx=t*a,this.vy=s*a,this.x=i,this.y=e,this.prevPoints=[[i,e]],this.color=h,this.alive=!0,this.size=l.fireworkShardBaseSize+l.fireworkShardAddedSize*Math.random()}function m(i,e,t){h.moveTo(i,e),h.bezierCurveTo(i-t/2,e-t/2,i-t/4,e-t,i,e-t),h.bezierCurveTo(i+t/4,e-t,i+t/2,e-t/2,i,e)}function y(){window.requestAnimationFrame(y),h.fillStyle="#fff",h.fillRect(0,0,t,s),h.translate(a,r);for(var i=!0,e=0;e<f.length;++e)f[e].step(),"done"!==f[e].phase&&(i=!1);if(h.translate(-a,-r),i)for(e=0;e<f.length;++e)f[e].reset()}h.font=l.charSize+"px Verdana",p.prototype.reset=function(){this.phase="firework",this.tick=0,this.spawned=!1,this.spawningTime=l.fireworkSpawnTime*Math.random()|0,this.reachTime=l.fireworkBaseReachTime+l.fireworkAddedReachTime*Math.random()|0,this.lineWidth=l.fireworkBaseLineWidth+l.fireworkAddedLineWidth*Math.random(),this.prevPoints=[[0,r,0]]},p.prototype.step=function(){if("firework"===this.phase)if(this.spawned){++this.tick;var i=this.tick/this.reachTime,e=Math.sin(i*d),t=i*this.x,s=r+e*this.fireworkDy;this.prevPoints.length>l.fireworkPrevPoints&&this.prevPoints.shift(),this.prevPoints.push([t,s,i*this.lineWidth]);for(var n=1/(this.prevPoints.length-1),c=1;c<this.prevPoints.length;++c){var f=this.prevPoints[c],p=this.prevPoints[c-1];h.strokeStyle=this.alphaColor.replace("alp",c/this.prevPoints.length),h.lineWidth=f[2]*n*c,h.beginPath(),h.moveTo(f[0],f[1]),h.lineTo(p[0],p[1]),h.stroke()}if(this.tick>=this.reachTime){this.phase="contemplate",this.circleFinalSize=l.fireworkCircleBaseSize+l.fireworkCircleAddedSize*Math.random(),this.circleCompleteTime=l.fireworkCircleBaseTime+l.fireworkCircleAddedTime*Math.random()|0,this.circleCreating=!0,this.circleFading=!1,this.circleFadeTime=l.fireworkCircleFadeBaseTime+l.fireworkCircleFadeAddedTime*Math.random()|0,this.tick=0,this.tick2=0,this.shards=[];var y=l.fireworkBaseShards+l.fireworkAddedShards*Math.random()|0,w=o/y,k=Math.cos(w),v=Math.sin(w);for(t=1,s=0,c=0;c<y;++c){var B=t;t=t*k-s*v,s=s*k+B*v,this.shards.push(new g(this.x,this.y,t,s,this.alphaColor))}}}else++this.tick,this.tick>=this.spawningTime&&(this.tick=0,this.spawned=!0);else if("contemplate"===this.phase){if(++this.tick,this.circleCreating){++this.tick2;var T=this.tick2/this.circleCompleteTime,E=-Math.cos(T*Math.PI)/2+.5;h.beginPath(),h.fillStyle=this.lightAlphaColor.replace("light",50+50*T).replace("alp",T),h.beginPath(),h.arc(this.x,this.y,E*this.circleFinalSize,0,o),h.fill(),this.tick2>this.circleCompleteTime&&(this.tick2=0,this.circleCreating=!1,this.circleFading=!0)}else this.circleFading?(h.fillStyle=this.lightColor.replace("light",70),h.fillText(this.char,this.x+this.dx,this.y+this.dy),++this.tick2,T=this.tick2/this.circleFadeTime,E=-Math.cos(T*Math.PI)/2+.5,h.beginPath(),h.fillStyle=this.lightAlphaColor.replace("light",100).replace("alp",1-E),h.arc(this.x,this.y,this.circleFinalSize,0,o),h.fill(),this.tick2>=this.circleFadeTime&&(this.circleFading=!1)):(h.fillStyle=this.lightColor.replace("light",70),h.fillText(this.char,this.x+this.dx,this.y+this.dy));for(c=0;c<this.shards.length;++c)this.shards[c].step(),this.shards[c].alive||(this.shards.splice(c,1),--c);if(this.tick>l.letterContemplatingWaitTime){this.phase="balloon",this.tick=0,this.spawning=!0,this.spawnTime=l.balloonSpawnTime*Math.random()|0,this.inflating=!1,this.inflateTime=l.balloonBaseInflateTime+l.balloonAddedInflateTime*Math.random()|0,this.size=l.balloonBaseSize+l.balloonAddedSize*Math.random()|0;var S=l.balloonBaseRadian+l.balloonAddedRadian*Math.random(),u=l.balloonBaseVel+l.balloonAddedVel*Math.random();this.vx=Math.cos(S)*u,this.vy=Math.sin(S)*u}}else"balloon"===this.phase&&(h.strokeStyle=this.lightColor.replace("light",80),this.spawning?(++this.tick,h.fillStyle=this.lightColor.replace("light",70),h.fillText(this.char,this.x+this.dx,this.y+this.dy),this.tick>=this.spawnTime&&(this.tick=0,this.spawning=!1,this.inflating=!0)):this.inflating?(++this.tick,T=this.tick/this.inflateTime,t=this.cx=this.x,s=this.cy=this.y-this.size*T,h.fillStyle=this.alphaColor.replace("alp",T),h.beginPath(),m(t,s,this.size*T),h.fill(),h.beginPath(),h.moveTo(t,s),h.lineTo(t,this.y),h.stroke(),h.fillStyle=this.lightColor.replace("light",70),h.fillText(this.char,this.x+this.dx,this.y+this.dy),this.tick>=this.inflateTime&&(this.tick=0,this.inflating=!1)):(this.cx+=this.vx,this.cy+=this.vy+=l.upFlow,h.fillStyle=this.color,h.beginPath(),m(this.cx,this.cy,this.size),h.fill(),h.beginPath(),h.moveTo(this.cx,this.cy),h.lineTo(this.cx,this.cy+this.size),h.stroke(),h.fillStyle=this.lightColor.replace("light",70),h.fillText(this.char,this.cx+this.dx,this.cy+this.dy+this.size),(this.cy+this.size<-r||this.cx<-a||this.cy>a)&&(this.phase="done")))},g.prototype.step=function(){this.x+=this.vx,this.y+=this.vy+=l.gravity,this.prevPoints.length>l.fireworkShardPrevPoints&&this.prevPoints.shift(),this.prevPoints.push([this.x,this.y]);for(var i=this.size/this.prevPoints.length,e=0;e<this.prevPoints.length-1;++e){var t=this.prevPoints[e],s=this.prevPoints[e+1];h.strokeStyle=this.color.replace("alp",e/this.prevPoints.length),h.lineWidth=e*i,h.beginPath(),h.moveTo(t[0],t[1]),h.lineTo(s[0],s[1]),h.stroke()}this.prevPoints[0][1]>r&&(this.alive=!1)};for(var w=0;w<l.strings.length;++w)for(var k=0;k<l.strings[w].length;++k)f.push(new p(l.strings[w][k],k*l.charSpacing+l.charSpacing/2-l.strings[w].length*l.charSize/2,w*l.lineHeight+l.lineHeight/2-l.strings.length*l.lineHeight/2));if(window.addEventListener("resize",function(){t=c.width=window.innerWidth,s=c.height=window.innerHeight,a=t/2,r=s/2,h.font=l.charSize+"px Verdana"}),e>0)head.style.display="initial",count.style.display="initial";else{head.style.display="none",count.style.display="none",giftbox.style.display="initial",clearInterval(x);var v=document.getElementById("merrywrap"),B=v.getElementsByClassName("giftbox")[0],T=1,E=[2e3,2e3,1e3,1e3];B.addEventListener("click",function i(){var e;1===T&&B.removeEventListener("click",i,!1),e=T,v.className="merrywrap",v.className="merrywrap step-"+e,4!==T&&(setTimeout(i,E[T-1]),T++)},!1),B.addEventListener("click",function(){canvasC.style.display="initial",setTimeout(y,1500)},!1)}},1e3);